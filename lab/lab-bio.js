// Inicializa√ß√£o das part√≠culas biol√≥gicas
document.addEventListener('DOMContentLoaded', () => {
    createBioParticles();
    console.log('üß¨ Laborat√≥rio de Biologia inicializado');
});

// Criar part√≠culas biol√≥gicas animadas (c√©lulas)
function createBioParticles() {
    const particlesContainer = document.getElementById('bioParticles');
    const particleCount = 20;
    
    for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = 'cell-particle';
        
        // Propriedades aleat√≥rias para cada part√≠cula
        const size = Math.random() * 15 + 8;
        const x = Math.random() * 100;
        const duration = Math.random() * 20 + 25;
        const delay = Math.random() * 5;
        
        // Cores aleat√≥rias baseadas no tema biol√≥gico
        const colors = ['#00ffaa', '#00d4aa', '#4fc3f7', '#26a69a', '#81c784'];
        const color = colors[Math.floor(Math.random() * colors.length)];
        
        particle.style.cssText = `
            left: ${x}%;
            width: ${size}px;
            height: ${size}px;
            background: radial-gradient(circle, ${color}, transparent);
            border: 2px solid ${color};
            --duration: ${duration}s;
            animation-delay: ${delay}s;
        `;
        
        particlesContainer.appendChild(particle);
    }
}

// Dados das se√ß√µes do laborat√≥rio
const sections = {
    microscopy: {
        title: 'üî¨ Microscopia Virtual',
        content: `
            <div style="padding: 20px;">
                <h3 style="color: #00ffaa; margin-bottom: 20px;">Simulador de Microsc√≥pio</h3>
                
                <div style="background: #16213e; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                    <h4 style="color: #ffffff; margin-bottom: 15px;">ü¶† C√©lulas Bacterianas</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                        <button onclick="viewCell('bacteria')" style="background: #00ffaa; color: #0f0c29; border: none; padding: 15px; border-radius: 10px; cursor: pointer; font-weight: bold;">E. coli</button>
                        <button onclick="viewCell('streptococcus')" style="background: #00d4aa; color: #0f0c29; border: none; padding: 15px; border-radius: 10px; cursor: pointer; font-weight: bold;">Streptococcus</button>
                        <button onclick="viewCell('bacillus')" style="background: #4fc3f7; color: #0f0c29; border: none; padding: 15px; border-radius: 10px; cursor: pointer; font-weight: bold;">Bacillus</button>
                    </div>
                </div>

                <div style="background: #16213e; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                    <h4 style="color: #ffffff; margin-bottom: 15px;">üß¨ C√©lulas Eucari√≥ticas</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                        <button onclick="viewCell('animal')" style="background: #00ffaa; color: #0f0c29; border: none; padding: 15px; border-radius: 10px; cursor: pointer; font-weight: bold;">C√©lula Animal</button>
                        <button onclick="viewCell('plant')" style="background: #00d4aa; color: #0f0c29; border: none; padding: 15px; border-radius: 10px; cursor: pointer; font-weight: bold;">C√©lula Vegetal</button>
                        <button onclick="viewCell('fungi')" style="background: #4fc3f7; color: #0f0c29; border: none; padding: 15px; border-radius: 10px; cursor: pointer; font-weight: bold;">C√©lula F√∫ngica</button>
                    </div>
                </div>

                <div style="background: #16213e; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                    <h4 style="color: #ffffff; margin-bottom: 15px;">ü©∏ Tecidos e Org√£os</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                        <button onclick="viewTissue('epithelial')" style="background: #00ffaa; color: #0f0c29; border: none; padding: 15px; border-radius: 10px; cursor: pointer; font-weight: bold;">Epit√©lio</button>
                        <button onclick="viewTissue('muscle')" style="background: #00d4aa; color: #0f0c29; border: none; padding: 15px; border-radius: 10px; cursor: pointer; font-weight: bold;">M√∫sculo</button>
                        <button onclick="viewTissue('nerve')" style="background: #4fc3f7; color: #0f0c29; border: none; padding: 15px; border-radius: 10px; cursor: pointer; font-weight: bold;">Nervo</button>
                    </div>
                </div>

                <div id="microscopy-result" style="margin-top: 20px; padding: 15px; background: #0f0c29; border-radius: 10px; border: 2px solid #00ffaa;">
                    <p style="color: #00ffaa; font-weight: bold;">Selecione uma amostra para visualizar no microsc√≥pio virtual</p>
                </div>
            </div>
        `
    },
    dna: {
        title: 'üß¨ An√°lise de DNA',
        content: `
            <div style="padding: 20px;">
                <h3 style="color: #00ffaa; margin-bottom: 20px;">Laborat√≥rio de Gen√©tica Molecular</h3>
                
                <div style="background: #16213e; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                    <h4 style="color: #ffffff; margin-bottom: 15px;">üî¨ Estrutura do DNA</h4>
                    <p style="color: #cccccc; margin-bottom: 15px;">Explore a estrutura tridimensional da dupla h√©lice</p>
                    <button onclick="analyzeDNA('structure')" style="background: #00ffaa; color: #0f0c29; border: none; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-weight: bold;">Visualizar Estrutura 3D</button>
                    <div id="dna-structure-result" style="margin-top: 15px; color: #00d4aa;"></div>
                </div>

                <div style="background: #16213e; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                    <h4 style="color: #ffffff; margin-bottom: 15px;">üîÑ Replica√ß√£o do DNA</h4>
                    <p style="color: #cccccc; margin-bottom: 15px;">Simule o processo de replica√ß√£o semiconservativa</p>
                    <button onclick="simulateReplication()" style="background: #00d4aa; color: #0f0c29; border: none; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-weight: bold;">Iniciar Replica√ß√£o</button>
                    <div id="replication-result" style="margin-top: 15px; color: #4fc3f7;"></div>
                </div>

                <div style="background: #16213e; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                    <h4 style="color: #ffffff; margin-bottom: 15px;">üìù Transcri√ß√£o e Tradu√ß√£o</h4>
                    <p style="color: #cccccc; margin-bottom: 15px;">Do DNA ao RNA mensageiro at√© as prote√≠nas</p>
                    <button onclick="transcribeTranslate()" style="background: #4fc3f7; color: #0f0c29; border: none; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-weight: bold;">S√≠ntese Proteica</button>
                    <div id="transcription-result" style="margin-top: 15px; color: #26a69a;"></div>
                </div>

                <div style="background: #16213e; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                    <h4 style="color: #ffffff; margin-bottom: 15px;">‚ö†Ô∏è Muta√ß√µes Gen√©ticas</h4>
                    <p style="color: #cccccc; margin-bottom: 15px;">Tipos de muta√ß√µes e seus efeitos</p>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px;">
                        <button onclick="simulateMutation('substitution')" style="background: #ff6b6b; color: white; border: none; padding: 10px; border-radius: 15px; cursor: pointer; font-weight: bold;">Substitui√ß√£o</button>
                        <button onclick="simulateMutation('insertion')" style="background: #feca57; color: #0f0c29; border: none; padding: 10px; border-radius: 15px; cursor: pointer; font-weight: bold;">Inser√ß√£o</button>
                        <button onclick="simulateMutation('deletion')" style="background: #ff9ff3; color: #0f0c29; border: none; padding: 10px; border-radius: 15px; cursor: pointer; font-weight: bold;">Dele√ß√£o</button>
                    </div>
                    <div id="mutation-result" style="margin-top: 15px; color: #ff6b6b;"></div>
                </div>
            </div>
        `
    },
    ecosystem: {
        title: 'üåø Ecossistemas Interativos',
        content: `
            <div style="padding: 20px;">
                <h3 style="color: #00ffaa; margin-bottom: 20px;">Simulador de Ecossistemas</h3>
                
                <div style="background: #16213e; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                    <h4 style="color: #ffffff; margin-bottom: 15px;">üåç Biomas Mundiais</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                        <button onclick="exploreBiome('rainforest')" style="background: #27ae60; color: white; border: none; padding: 15px; border-radius: 10px; cursor: pointer; font-weight: bold;">Floresta Tropical</button>
                        <button onclick="exploreBiome('savanna')" style="background: #f39c12; color: white; border: none; padding: 15px; border-radius: 10px; cursor: pointer; font-weight: bold;">Savana</button>
                        <button onclick="exploreBiome('ocean')" style="background: #3498db; color: white; border: none; padding: 15px; border-radius: 10px; cursor: pointer; font-weight: bold;">Oceano</button>
                        <button onclick="exploreBiome('desert')" style="background: #e67e22; color: white; border: none; padding: 15px; border-radius: 10px; cursor: pointer; font-weight: bold;">Deserto</button>
                    </div>
                    <div id="biome-result" style="margin-top: 20px; color: #00ffaa;"></div>
                </div>

                <div style="background: #16213e; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                    <h4 style="color: #ffffff; margin-bottom: 15px;">üîó Cadeias Alimentares</h4>
                    <p style="color: #cccccc; margin-bottom: 15px;">Construa cadeias alimentares complexas</p>
                    <button onclick="buildFoodChain()" style="background: #00ffaa; color: #0f0c29; border: none; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-weight: bold;">Criar Cadeia Alimentar</button>
                    <div id="food-chain-result" style="margin-top: 15px; color: #00d4aa;"></div>
                </div>

                <div style="background: #16213e; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                    <h4 style="color: #ffffff; margin-bottom: 15px;">‚ôªÔ∏è Ciclos Biogeoqu√≠micos</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px;">
                        <button onclick="simulateCycle('water')" style="background: #3498db; color: white; border: none; padding: 10px; border-radius: 15px; cursor: pointer; font-weight: bold;">√Ågua</button>
                        <button onclick="simulateCycle('carbon')" style="background: #2c3e50; color: white; border: none; padding: 10px; border-radius: 15px; cursor: pointer; font-weight: bold;">Carbono</button>
                        <button onclick="simulateCycle('nitrogen')" style="background: #9b59b6; color: white; border: none; padding: 10px; border-radius: 15px; cursor: pointer; font-weight: bold;">Nitrog√™nio</button>
                        <button onclick="simulateCycle('phosphorus')" style="background: #e74c3c; color: white; border: none; padding: 10px; border-radius: 15px; cursor: pointer; font-weight: bold;">F√≥sforo</button>
                    </div>
                    <div id="cycle-result" style="margin-top: 15px; color: #4fc3f7;"></div>
                </div>

                <div style="background: #16213e; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                    <h4 style="color: #ffffff; margin-bottom: 15px;">üå± Rela√ß√µes Ecol√≥gicas</h4>
                    <p style="color: #cccccc; margin-bottom: 15px;">Explore as intera√ß√µes entre organismos</p>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 10px;">
                        <button onclick="showRelation('mutualism')" style="background: #00ffaa; color: #0f0c29; border: none; padding: 10px; border-radius: 15px; cursor: pointer; font-weight: bold;">Mutualismo</button>
                        <button onclick="showRelation('predation')" style="background: #e74c3c; color: white; border: none; padding: 10px; border-radius: 15px; cursor: pointer; font-weight: bold;">Preda√ß√£o</button>
                        <button onclick="showRelation('competition')" style="background: #f39c12; color: white; border: none; padding: 10px; border-radius: 15px; cursor: pointer; font-weight: bold;">Competi√ß√£o</button>
                        <button onclick="showRelation('parasitism')" style="background: #9b59b6; color: white; border: none; padding: 10px; border-radius: 15px; cursor: pointer; font-weight: bold;">Parasitismo</button>
                    </div>
                    <div id="relation-result" style="margin-top: 15px; color: #26a69a;"></div>
                </div>
            </div>
        `
    },
    evolution: {
        title: 'üß¨ Evolu√ß√£o e Gen√©tica',
        content: `
            <div style="padding: 20px;">
                <h3 style="color: #00ffaa; margin-bottom: 20px;">Simulador Evolutivo</h3>
                
                <div style="background: #16213e; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                    <h4 style="color: #ffffff; margin-bottom: 15px;">ü¶ã Sele√ß√£o Natural</h4>
                    <p style="color: #cccccc; margin-bottom: 15px;">Simule a evolu√ß√£o de popula√ß√µes sob press√£o seletiva</p>
                    <button onclick="simulateSelection()" style="background: #00ffaa; color: #0f0c29; border: none; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-weight: bold;">Iniciar Sele√ß√£o Natural</button>
                    <div id="selection-result" style="margin-top: 15px; color: #00d4aa;"></div>
                </div>

                <div style="background: #16213e; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                    <h4 style="color: #ffffff; margin-bottom: 15px;">üß¨ Deriva Gen√©tica</h4>
                    <p style="color: #cccccc; margin-bottom: 15px;">Observe mudan√ßas aleat√≥rias na frequ√™ncia al√©lica</p>
                    <button onclick="simulateDrift()" style="background: #4fc3f7; color: #0f0c29; border: none; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-weight: bold;">Simular Deriva</button>
                    <div id="drift-result" style="margin-top: 15px; color: #4fc3f7;"></div>
                </div>

                <div style="background: #16213e; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                    <h4 style="color: #ffffff; margin-bottom: 15px;">üå≥ Especia√ß√£o</h4>
                    <p style="color: #cccccc; margin-bottom: 15px;">Mecanismos de forma√ß√£o de novas esp√©cies</p>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px;">
                        <button onclick="simulateSpeciation('allopatric')" style="background: #27ae60; color: white; border: none; padding: 10px; border-radius: 15px; cursor: pointer; font-weight: bold;">Alop√°trica</button>
                        <button onclick="simulateSpeciation('sympatric')" style="background: #8e44ad; color: white; border: none; padding: 10px; border-radius: 15px; cursor: pointer; font-weight: bold;">Simp√°trica</button>
                        <button onclick="simulateSpeciation('parapatric')" style="background: #16a085; color: white; border: none; padding: 10px; border-radius: 15px; cursor: pointer; font-weight: bold;">Parap√°trica</button>
                    </div>
                    <div id="speciation-result" style="margin-top: 15px; color: #26a69a;"></div>
                </div>

                <div style="background: #16213e; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                    <h4 style="color: #ffffff; margin-bottom: 15px;">üåø √Årvore Filogen√©tica</h4>
                    <p style="color: #cccccc; margin-bottom: 15px;">Explore as rela√ß√µes evolutivas entre esp√©cies</p>
                    <button onclick="buildPhylogeny()" style="background: #e67e22; color: white; border: none; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-weight: bold;">Construir Filogenia</button>
                    <div id="phylogeny-result" style="margin-top: 15px; color: #e67e22;"></div>
                </div>

                <div style="background: #16213e; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                    <h4 style="color: #ffffff; margin-bottom: 15px;">üß™ Gen√©tica de Popula√ß√µes</h4>
                    <p style="color: #cccccc; margin-bottom: 15px;">Aplicar o princ√≠pio de Hardy-Weinberg</p>
                    <button onclick="calculateHardyWeinberg()" style="background: #f39c12; color: white; border: none; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-weight: bold;">Calcular Frequ√™ncias</button>
                    <div id="hardy-weinberg-result" style="margin-top: 15px; color: #f39c12;"></div>
                </div>
            </div>
        `
    }
};

// Fun√ß√µes das se√ß√µes
function openSection(sectionName) {
    const modal = document.getElementById('sectionModal');
    const modalTitle = document.getElementById('modalTitle');
    const modalContent = document.getElementById('modalContent');
    
    if (sections[sectionName]) {
        modalTitle.textContent = sections[sectionName].title;
        modalContent.innerHTML = sections[sectionName].content;
        modal.style.display = 'flex';
    }
}

function closeModal() {
    document.getElementById('sectionModal').style.display = 'none';
}

// Fun√ß√£o para mudar zoom do microsc√≥pio
function changeZoom(level) {
    const cellImage = document.querySelector('.cell-image');
    const description = document.querySelector('.microscope-viewer p');
    
    switch(level) {
        case '100x':
            cellImage.style.backgroundSize = '40px 40px, 20px 20px';
            description.textContent = 'Amostra atual: Vis√£o geral das c√©lulas (100x)';
            break;
        case '400x':
            cellImage.style.backgroundSize = '25px 25px, 12px 12px';
            description.textContent = 'Amostra atual: Detalhes celulares vis√≠veis (400x)';
            break;
        case '1000x':
            cellImage.style.backgroundSize = '15px 15px, 8px 8px';
            description.textContent = 'Amostra atual: Organelas celulares detalhadas (1000x)';
            break;
    }
}

// Fun√ß√µes de microscopia
function viewCell(type) {
    const result = document.getElementById('microscopy-result');
    const descriptions = {
        bacteria: 'ü¶† C√©lulas bacterianas (procari√≥ticas) - sem n√∫cleo definido, parede celular r√≠gida',
        streptococcus: 'üîó Streptococcus - bact√©rias em cadeia, causadoras de infec√ß√µes',
        bacillus: 'üìè Bacillus - bact√©rias em forma de bastonete, algumas formam esporos',
        animal: 'üêæ C√©lula animal - n√∫cleo, mitoc√¥ndrias, sem parede celular',
        plant: 'üå± C√©lula vegetal - cloroplastos, parede celular, vac√∫olo central',
        fungi: 'üçÑ C√©lula f√∫ngica - parede celular de quitina, sem cloroplastos'
    };
    
    result.innerHTML = `<p style="color: #00ffaa; font-weight: bold;">Observando: ${descriptions[type]}</p>`;
}

function viewTissue(type) {
    const result = document.getElementById('microscopy-result');
    const descriptions = {
        epithelial: 'üß± Tecido epitelial - c√©lulas justapostas, fun√ß√£o de revestimento',
        muscle: 'üí™ Tecido muscular - c√©lulas alongadas, capacidade contr√°til',
        nerve: '‚ö° Tecido nervoso - neur√¥nios e c√©lulas da glia, transmiss√£o de impulsos'
    };
    
    result.innerHTML = `<p style="color: #00ffaa; font-weight: bold;">Analisando: ${descriptions[type]}</p>`;
}

// Fun√ß√µes de DNA
function analyzeDNA(type) {
    const result = document.getElementById('dna-structure-result');
    result.innerHTML = `
        <p style="font-weight: bold;">üß¨ Estrutura 3D do DNA visualizada!</p>
        <p>Dupla h√©lice antiparalela com liga√ß√µes de hidrog√™nio entre bases complementares</p>
        <p>A-T: 2 liga√ß√µes | G-C: 3 liga√ß√µes</p>
    `;
}

function simulateReplication() {
    const result = document.getElementById('replication-result');
    result.innerHTML = `
        <p style="font-weight: bold;">üîÑ Replica√ß√£o em andamento...</p>
        <p>1. Desenrolamento da dupla h√©lice</p>
        <p>2. DNA polimerase sintetiza fitas complementares</p>
        <p>3. Duas mol√©culas id√™nticas formadas!</p>
    `;
}

function transcribeTranslate() {
    const result = document.getElementById('transcription-result');
    result.innerHTML = `
        <p style="font-weight: bold;">üìù Processo de s√≠ntese proteica:</p>
        <p>DNA ‚Üí RNA mensageiro (transcri√ß√£o)</p>
        <p>mRNA ‚Üí Prote√≠na (tradu√ß√£o)</p>
        <p>C√≥don AUG = Metionina (in√≠cio)</p>
    `;
}

function simulateMutation(type) {
    const result = document.getElementById('mutation-result');
    const mutations = {
        substitution: 'Uma base √© substitu√≠da por outra (ex: A‚ÜíT)',
        insertion: 'Uma ou mais bases s√£o inseridas na sequ√™ncia',
        deletion: 'Uma ou mais bases s√£o removidas da sequ√™ncia'
    };
    
    result.innerHTML = `<p style="font-weight: bold;">‚ö†Ô∏è Muta√ß√£o ${type}: ${mutations[type]}</p>`;
}

// Fun√ß√µes de ecossistemas
function exploreBiome(type) {
    const result = document.getElementById('biome-result');
    const biomes = {
        rainforest: 'üå≥ Alta biodiversidade, clima quente e √∫mido, m√∫ltiplos estratos',
        savanna: 'ü¶Å Gram√≠neas com √°rvores esparsas, duas esta√ß√µes bem definidas',
        ocean: 'üêã Maior bioma do planeta, diferentes zonas de profundidade',
        desert: 'üåµ Baixa precipita√ß√£o, adapta√ß√µes para conservar √°gua'
    };
    
    result.innerHTML = `<p style="font-weight: bold;">Explorando: ${biomes[type]}</p>`;
}

function buildFoodChain() {
    const result = document.getElementById('food-chain-result');
    result.innerHTML = `
        <p style="font-weight: bold;">üîó Cadeia alimentar constru√≠da:</p>
        <p>Produtor (üå±) ‚Üí Consumidor Prim√°rio (üê∞) ‚Üí Consumidor Secund√°rio (ü¶ä) ‚Üí Decompositor (üçÑ)</p>
    `;
}

function simulateCycle(type) {
    const result = document.getElementById('cycle-result');
    const cycles = {
        water: 'Evapora√ß√£o ‚Üí Condensa√ß√£o ‚Üí Precipita√ß√£o ‚Üí Infiltra√ß√£o',
        carbon: 'Fotoss√≠ntese ‚Üî Respira√ß√£o, Combust√£o ‚Üí Atmosfera',
        nitrogen: 'Fixa√ß√£o ‚Üí Nitrifica√ß√£o ‚Üí Assimila√ß√£o ‚Üí Desnitrifica√ß√£o',
        phosphorus: 'Rochas ‚Üí Solo ‚Üí Plantas ‚Üí Animais ‚Üí Decomposi√ß√£o'
    };
    
    result.innerHTML = `<p style="font-weight: bold;">‚ôªÔ∏è Ciclo do ${type}: ${cycles[type]}</p>`;
}

function showRelation(type) {
    const result = document.getElementById('relation-result');
    const relations = {
        mutualism: 'ü§ù Ambos organismos se beneficiam (ex: flores e abelhas)',
        predation: 'ü¶Å Um organismo consome outro para obter energia',
        competition: '‚öîÔ∏è Organismos disputam recursos limitados',
        parasitism: 'ü¶† Um organismo se beneficia prejudicando outro'
    };
    
    result.innerHTML = `<p style="font-weight: bold;">${relations[type]}</p>`;
}

// Fun√ß√µes de evolu√ß√£o
function simulateSelection() {
    const result = document.getElementById('selection-result');
    result.innerHTML = `
        <p style="font-weight: bold;">ü¶ã Sele√ß√£o natural em a√ß√£o:</p>
        <p>Indiv√≠duos com caracter√≠sticas vantajosas sobrevivem e reproduzem mais</p>
        <p>Frequ√™ncia al√©lica da popula√ß√£o muda ao longo das gera√ß√µes</p>
    `;
}

function simulateDrift() {
    const result = document.getElementById('drift-result');
    result.innerHTML = `
        <p style="font-weight: bold;">üé≤ Deriva gen√©tica simulada:</p>
        <p>Mudan√ßas aleat√≥rias na frequ√™ncia al√©lica</p>
        <p>Efeito mais pronunciado em popula√ß√µes pequenas</p>
    `;
}

function simulateSpeciation(type) {
    const result = document.getElementById('speciation-result');
    const speciation = {
        allopatric: 'Isolamento geogr√°fico ‚Üí diverg√™ncia ‚Üí nova esp√©cie',
        sympatric: 'Isolamento reprodutivo na mesma √°rea geogr√°fica',
        parapatric: 'Especia√ß√£o em zonas de contato com fluxo g√™nico limitado'
    };
    
    result.innerHTML = `<p style="font-weight: bold;">üå≥ Especia√ß√£o ${type}: ${speciation[type]}</p>`;
}

function buildPhylogeny() {
    const result = document.getElementById('phylogeny-result');
    result.innerHTML = `
        <p style="font-weight: bold;">üåø √Årvore filogen√©tica:</p>
        <p>ü¶† Bact√©rias ‚Üí üß¨ Eucariotos ‚Üí üçÑ Fungos ‚Üí üå± Plantas ‚Üí üêæ Animais</p>
        <p>Baseada em similaridades gen√©ticas e morfol√≥gicas</p>
    `;
}

function calculateHardyWeinberg() {
    const result = document.getElementById('hardy-weinberg-result');
    result.innerHTML = `
        <p style="font-weight: bold;">üß™ Equil√≠brio de Hardy-Weinberg:</p>
        <p>p¬≤ + 2pq + q¬≤ = 1</p>
        <p>Frequ√™ncias al√©licas constantes sob condi√ß√µes ideais</p>
    `;
}

// Fechar modal ao clicar fora
window.onclick = function(event) {
    const modal = document.getElementById('sectionModal');
    if (event.target === modal) {
        closeModal();
    }
}